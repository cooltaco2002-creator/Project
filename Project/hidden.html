<!DOCTYPE html>
    <!-- Language declaration -->
<html lang="en">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <meta name="author" content="Eric, Carter">
 <title> FishFinder </title>
   <link rel="stylesheet" href="css/styles.css">
   <link rel="icon" href="images/fish1.svg" type="image/svg+xml">
   <nav>
        <!-- Navigation links -->
         <header class="site-header container">
      <div class="site-title"><div class="logo"></div><h1>Hidden Content</h1></div>
      <nav class="primary">
        <a href="index.html">Home</a>
        <a href="dashboard.html">Dashboard</a>
        <a href="about.html">About</a>
        <a href="form.html">Submit</a>
        <a href="faq.html">FAQ</a>
        <a href="hidden.html">Hidden</a>
    </nav>
<!-- Login Form -->
<style>
    .protected-content{display:none}
    .protected-content.show{display:block}
    .error-message{display:none;color:#b91c1c;margin-top:.5rem}
    .error-message.show{display:block}
    .login-container{max-width:420px;margin:1.5rem auto;padding:1rem;border-radius:10px;background:#fff}
    .btn-login{margin-top:.75rem}
    .success-badge{display:inline-block;padding:.25rem .6rem;background:#daf5e9;border-radius:999px;color:#065f46}
</style>
</head>
<body>
   <div id="loginContainer" class="login-container">
   <div class="lock-icon">üîí</div>
       <h1>Protected Page</h1>
       <p class="subtitle">Enter password to access this content</p>
       <form id="loginForm">
            <div class="input-group">
               <label for="password">Password</label>
               <input type="password" id="password" placeholder="Enter password" required autofocus>
            </div>


            <button type="submit" class="btn-login">Unlock</button>


            <div id="errorMessage" class="error-message">
                    ‚ùå Incorrect password. Please try again.
            </div>
       </form>


       <div class="hint">
       <strong>Hint:</strong> The password is <code>secret123</code>
       </div>
   </div>

   <!-- Protected Content (Hidden by Default) -->
    <div id="protectedContent" class="protected-content" >
   <span class="success-badge">‚úÖ Access Granted</span>
   <h1>Welcome to the Secret Page!</h1>
   <p>You have reached my secret page </p>
   <button class="btn-logout" onclick="logout()"> Logout</button>
</div>


<script>
   // Set your password here
   const CORRECT_PASSWORD = "secret123";


   // Get elements
   const loginContainer = document.getElementById("loginContainer");
   const protectedContent = document.getElementById("protectedContent");
   const loginForm = document.getElementById("loginForm");
   const passwordInput = document.getElementById("password");
   const errorMessage = document.getElementById("errorMessage");


   // Check if user is already logged in (from previous session)
   window.addEventListener('load', checkAuth);


   async function checkAuth() {
           try {
               const result = await window.storage.get('isAuthenticated');
              
               if (result && result.value === 'true') {
                   showProtectedContent();
               }
           } catch (error) {
               // Not authenticated, show login
           }
       }


   // Handle login form submission
   loginForm.addEventListener('submit', async (e) => {
       e.preventDefault();
       const enteredPassword = passwordInput.value;
  
       // Check if password is correct
       if (enteredPassword === CORRECT_PASSWORD) {
      
       // Save authentication state
       try {
           await window.storage.set('isAuthenticated', 'true');
       } catch (error) {
           console.log('Could not save auth state');
       }
              
       showProtectedContent();}
       else {
           // Show error message
           errorMessage.classList.add('show');
           passwordInput.value = '';
           passwordInput.focus();


           // Hide error after 3 seconds
           setTimeout(() => {
               errorMessage.classList.remove('show');
           }, 3000);
       }
   });


   // Show protected content and hide login
   function showProtectedContent() {
       loginContainer.style.display = 'none';
       protectedContent.classList.add('show');
   }


   // Logout function
   async function logout() {
       try {
           await window.storage.delete('isAuthenticated');
       } catch (error) {
           console.log('Could not clear auth state');
       }


       protectedContent.classList.remove('show');
       loginContainer.style.display = 'block';
       passwordInput.value = '';
       passwordInput.focus();
       }
</script>
</body>
</html>
